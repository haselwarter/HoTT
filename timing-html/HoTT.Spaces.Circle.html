<html>
<head>
<title>Circle.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Circle.v</h1>

<div class="code" title="File: Circle.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 1
Time: 0.056s">
<div class="time" style="width: 93.333333333333%"></div>
<pre>Require Import Basics Types.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 1
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
Require Import HProp HSet.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 2
Time: 0.004s">
<div class="time" style="width: 6.6666666666667%"></div>
<pre>
Require Import Spaces.Pos Spaces.Int.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 3
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>
Require Import HIT.Coeq.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 4
Time: 0.06s">
<div class="time" style="width: 100%"></div>
<pre>
Require Import Modalities.Modality Truncations.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Cubical.DPath.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Theorems about the [Circle]. *)

</pre>
</div>
<div class="code" title="File: Circle.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Generalizable Variables X A B f g n.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* ** Definition of the [Circle]. *)

(** We define the circle as the coequalizer of two copies of the identity map of [Unit].  This is easily equivalent to the naive definition

&lt;&lt;&lt;
Private Inductive Circle : Type0 :=
| base : Circle
| loop : base = base.
&gt;&gt;&gt;

but it allows us to apply the flattening lemma directly rather than having to pass across that equivalence.  *)

(** The circle is defined to be the coequalizer of two copies of the identity map on [Unit]. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Circle := @Coeq Unit Unit idmap idmap.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It has a basepoint. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 27
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition base : Circle := coeq tt.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 27
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** And a non-trivial path. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition loop : base = base := cglue tt.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Here is a notation for the circle that can be imported. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module CircleNotation.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Notation S1 := Circle (only parsing).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
End CircleNotation.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Circle induction *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Circle_ind (P : Circle -&gt; Type)
  (b : P base) (l : loop # b = b)
  : forall (x : Circle), P x.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 38
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  refine (Coeq_ind P (fun u =&gt; transport P (ap coeq (path_unit tt u)) b) _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros []; exact l.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 40
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Computation rule for circle induction. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 43
Time: 0.006s">
<div class="time" style="width: 10%"></div>
<pre>Definition Circle_ind_beta_loop (P : Circle -&gt; Type)
  (b : P base) (l : loop # b = b)
  : apD (Circle_ind P b l) loop = l
  := Coeq_ind_beta_cglue P _ _ tt.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** We mark [Circle], [base] and [loop] to never be simplified by [simpl] or [cbn] in order to hide how we defined it from the user. *) </pre>
</div>
<div class="code" title="File: Circle.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Arguments Circle : simpl never.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments base : simpl never.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments loop : simpl never.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Circle_ind_beta_loop : simpl never.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The recursion princple or non-dependent eliminator. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 53
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>Definition Circle_rec (P : Type) (b : P) (l : b = b)
  : Circle -&gt; P
  := Circle_ind (fun _ =&gt; P) b (transport_const _ _ @ l).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Computation rule for non-dependent eliminator. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Circle_rec_beta_loop (P : Type) (b : P) (l : b = b)
  : ap (Circle_rec P b l) loop = l.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold Circle_rec.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (cancelL (transport_const loop b) _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 61
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  refine ((apD_const (Circle_ind (fun _ =&gt; P) b _) loop)^ @ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (Circle_ind_beta_loop (fun _ =&gt; P) _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 63
Time: 0.005s">
<div class="time" style="width: 8.3333333333333%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The [Circle] is pointed by [base]. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance ispointed_Circle : IsPointed Circle := base.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** In this section we prove that the loop space of the [Circle] is the Integers [Int]. This is the encode-decode style proof a la Licata-Shulman. *)

</pre>
</div>
<div class="code" title="File: Circle.v
Line: 69
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section EncodeDecode.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 69
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** We assume univalence throughout this section. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context `{Univalence}.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** First we define the type of codes, this is a type family over the circle. This can be thought of as the covering space by the homotopical real numbers. It is defined by mapping loop to the path given by univalence applied to the automorphism of the integers. We will show that the section of this family at [base] is equivalent to the loop space of the circle. Giving us an equivalence [base = base &lt;~&gt; Int]. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>Definition Circle_code : Circle -&gt; Type
    := Circle_rec Type Int (path_universe int_succ).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Transporting along [loop] gives us the successor automorphism on [Int]. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_Circle_code_loop (z : Int)
    : transport Circle_code loop z = int_succ z.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 80
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (transport_compose idmap Circle_code loop z @ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 81
Time: 0.003s">
<div class="time" style="width: 5%"></div>
<pre>
    unfold Circle_code; rewrite Circle_rec_beta_loop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply transport_path_universe.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 83
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 84
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Transporting along [loop^] gives us the predecessor on [Int]. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_Circle_code_loopV (z : Int)
    : transport Circle_code loop^ z = int_pred z.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (transport_compose idmap Circle_code loop^ z @ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 90
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
    rewrite ap_V.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 91
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
    unfold Circle_code; rewrite Circle_rec_beta_loop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 92
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
    rewrite &lt;- (path_universe_V int_succ).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply transport_path_universe.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 94
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** To turn a path in [Circle] based at [base] into a code we transport along it. We call this encoding. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 98
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>Definition Circle_encode (x:Circle) : (base = x) -&gt; Circle_code x
    := fun p =&gt; p # zero.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** TODO: explain this proof in more detail. *)
  (** Turning a code into a path based at [base]. We call this decoding. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Circle_decode (x : Circle) : Circle_code x -&gt; (base = x).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    revert x; refine (Circle_ind (fun x =&gt; Circle_code x -&gt; base = x) (loopexp loop) _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply path_forall; intros z; simpl in z.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 106
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
    refine (transport_arrow _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (transport_paths_r loop _ @ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite transport_Circle_code_loopV.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 109
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
    destruct z as [n| |n].</pre>
</div>
<div class="code" title="File: Circle.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    2: apply concat_Vp.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Circle.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite &lt;- int_neg_pos_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold loopexp, loopexp_pos.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 113
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
      rewrite pos_peano_ind_beta_pos_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply concat_pV_p.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Circle.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    induction n as [|n nH] using pos_peano_ind.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply concat_1p.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite &lt;- pos_add_1_r.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    change (pos (n + 1)%pos)
      with (int_succ (pos n)).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite int_pred_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 121
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
    cbn; rewrite pos_add_1_r.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold loopexp_pos.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite pos_peano_ind_beta_pos_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 125
Time: 0.003s">
<div class="time" style="width: 5%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The non-trivial part of the proof that decode and encode are equivalences is showing that decoding followed by encoding is the identity on the fibers over [base]. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Circle_encode_loopexp (z:Int)
    : Circle_encode base (loopexp loop z) = z.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    destruct z as [n | | n]; unfold Circle_encode.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Circle.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> induction n using pos_peano_ind; simpl in *.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Circle.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (moveR_transport_V _ loop _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        by symmetry; apply transport_Circle_code_loop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Circle.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold loopexp_pos.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 136
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
        rewrite pos_peano_ind_beta_pos_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 137
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
        rewrite transport_pp.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (moveR_transport_V _ loop _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 139
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>
        refine (_ @ (transport_Circle_code_loop _)^).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (IHn @ _^).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 141
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>
        rewrite int_neg_pos_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        by rewrite int_succ_pred.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Circle.v
Line: 144
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 144
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Circle.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> induction n using pos_peano_ind; simpl in *.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Circle.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> by apply transport_Circle_code_loop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Circle.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold loopexp_pos.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        rewrite pos_peano_ind_beta_pos_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 148
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
        rewrite transport_pp.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (moveR_transport_p _ loop _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (_ @ (transport_Circle_code_loopV _)^).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (IHn @ _^).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        rewrite &lt;- pos_add_1_r.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        change (int_pred (int_succ (pos n)) = pos n).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        apply int_pred_succ.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 155
Time: 0.006s">
<div class="time" style="width: 10%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Now we put it together. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Circle_encode_isequiv (x:Circle) : IsEquiv (Circle_encode x).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
   refine (isequiv_adjointify (Circle_encode x) (Circle_decode x) _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (* Here we induct on [x:Circle].  We just did the case when [x] is [base]. *)
   </pre>
</div>
<div class="code" title="File: Circle.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Circle.v
Line: 163
Time: 0.003s">
<div class="time" style="width: 5%"></div>
<pre> refine (Circle_ind (fun x =&gt; (Circle_encode x) o (Circle_decode x) == idmap)
        Circle_encode_loopexp _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      (* What remains is easy since [Int] is known to be a set. *)
     </pre>
</div>
<div class="code" title="File: Circle.v
Line: 166
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>by apply path_forall; intros z; apply hset_path2.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (* The other side is trivial by path induction. *)
   </pre>
</div>
<div class="code" title="File: Circle.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Circle.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros []; reflexivity.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 168
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Finally giving us an equivalence between the loop space of the [Circle] and [Int]. *)
 </pre>
</div>
<div class="code" title="File: Circle.v
Line: 172
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>Definition equiv_loopCircle_int : (base = base) &lt;~&gt; Int
    := Build_Equiv _ _ (Circle_encode base) (Circle_encode_isequiv base).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 173
Time: 0.008s">
<div class="time" style="width: 13.333333333333%"></div>
<pre>

End EncodeDecode.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 175
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Connectedness and truncatedness of the [Circle] *)

(** The circle is 0-connected. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance isconnected_Circle `{Univalence} : IsConnected 0 Circle.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply is0connected_merely_allpath.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (tr base).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srefine (Circle_ind _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Circle.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (Circle_ind _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Circle.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (tr 1).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Circle.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply path_ishprop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Circle.v
Line: 187
Time: 0.006s">
<div class="time" style="width: 10%"></div>
<pre> apply path_ishprop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 187
Time: 0.002s">
<div class="time" style="width: 3.3333333333333%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It follows that the circle is a 1-type. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 190
Time: 0.003s">
<div class="time" style="width: 5%"></div>
<pre>Global Instance istrunc_Circle `{Univalence} : IsTrunc 1 Circle.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros x y.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  assert (p := merely_path_is0connected Circle base x).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 193
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  assert (q := merely_path_is0connected Circle base y).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 194
Time: 0.048s">
<div class="time" style="width: 80%"></div>
<pre>
  strip_truncations.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 196
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  refine (istrunc_equiv_istrunc (n := 0) Int equiv_loopCircle_int^-1).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 197
Time: 0.003s">
<div class="time" style="width: 5%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Iteration of equivalences *)

(** If [P : Circle -&gt; Type] is defined by a type [X] and an autoequivalence [f], then the image of [n : Int] regarded as in [base = base] is [iter_int f n]. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 202
Time: 0.005s">
<div class="time" style="width: 8.3333333333333%"></div>
<pre>Definition Circle_action_is_iter `{Univalence} X (f : X &lt;~&gt; X) (n : Int) (x : X)
: transport (Circle_rec Type X (path_universe f)) (equiv_loopCircle_int^-1 n) x
  = int_iter f n x.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 205
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  refine (_ @ loopexp_path_universe _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (transport_compose idmap _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 207
Time: 0.001s">
<div class="time" style="width: 1.6666666666667%"></div>
<pre>
  refine (ap (fun p =&gt; transport idmap p x) _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold equiv_loopCircle_int; cbn.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold Circle_decode; simpl.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 210
Time: 0.003s">
<div class="time" style="width: 5%"></div>
<pre>
  rewrite ap_loopexp.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (ap (fun p =&gt; loopexp p n) _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Circle_rec_beta_loop.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 213
Time: 0.011s">
<div class="time" style="width: 18.333333333333%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** An alternative induction principle for Circle that produces a DPath. *)</pre>
</div>
<div class="code" title="File: Circle.v
Line: 216
Time: 0.036s">
<div class="time" style="width: 60%"></div>
<pre>Definition Circle_ind_dp (P : Circle -&gt; Type) (b : P base)
  (bl : DPath P loop b b) (x : Circle) : P x
  := Circle_ind P b (dp_path_transport^-1 bl) x.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition Circle_ind_dp_beta_loop (P : Circle -&gt; Type) (b : P base)
  (bl : DPath P loop b b) : dp_apD (Circle_ind_dp P b bl) loop = bl.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply dp_apD_path_transport.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (Circle_ind_beta_loop _ _ _).</pre>
</div>
<div class="code" title="File: Circle.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Circle.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

